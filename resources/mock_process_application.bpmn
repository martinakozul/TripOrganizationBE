<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0wal9dm" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.23.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.5.0">
  <bpmn:process id="mock_process_application" name="Process application generator" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" name="Mock trip application">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=applicationId" target="applicationId" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_01q0ybt</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0dz7ut8" messageRef="Message_3ia0ad4" />
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_01q0ybt" sourceRef="StartEvent_1" targetRef="Gateway_1jr9yl4" />
    <bpmn:eventBasedGateway id="Gateway_1jr9yl4">
      <bpmn:incoming>Flow_01q0ybt</bpmn:incoming>
      <bpmn:outgoing>Flow_0h0gov7</bpmn:outgoing>
      <bpmn:outgoing>Flow_13ei9dm</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_19iwij0" name="Invoice received">
      <bpmn:incoming>Flow_0h0gov7</bpmn:incoming>
      <bpmn:outgoing>Flow_19vt0s1</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0qc03w9" messageRef="Message_0b87f7m" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0h0gov7" sourceRef="Gateway_1jr9yl4" targetRef="Event_19iwij0" />
    <bpmn:intermediateCatchEvent id="Event_0uduk3t" name="Trip full">
      <bpmn:incoming>Flow_13ei9dm</bpmn:incoming>
      <bpmn:outgoing>Flow_0uq69cu</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1e1eyvx" messageRef="Message_2mf1ans" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_13ei9dm" sourceRef="Gateway_1jr9yl4" targetRef="Event_0uduk3t" />
    <bpmn:endEvent id="Event_0ud1zhv">
      <bpmn:incoming>Flow_0uq69cu</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0uq69cu" sourceRef="Event_0uduk3t" targetRef="Event_0ud1zhv" />
    <bpmn:sequenceFlow id="Flow_19vt0s1" sourceRef="Event_19iwij0" targetRef="Activity_1lqsgst" />
    <bpmn:exclusiveGateway id="Gateway_0qcziw7" name="Mock not paid?">
      <bpmn:incoming>Flow_0l42tqh</bpmn:incoming>
      <bpmn:outgoing>Flow_0x1baam</bpmn:outgoing>
      <bpmn:outgoing>Flow_0e2bb6w</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0l42tqh" sourceRef="Activity_1lqsgst" targetRef="Gateway_0qcziw7" />
    <bpmn:endEvent id="Event_1li0l0x" name="Application not paid">
      <bpmn:incoming>Flow_0x1baam</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0x1baam" name="Yes" sourceRef="Gateway_0qcziw7" targetRef="Event_1li0l0x">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=paymentDuration = null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:intermediateThrowEvent id="Event_0gz41pl" name="Send payment proof">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="mock_send_payment_proof" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0jed06s</bpmn:incoming>
      <bpmn:outgoing>Flow_0ini6g5</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_02vq7a9" />
    </bpmn:intermediateThrowEvent>
    <bpmn:exclusiveGateway id="Gateway_0eun9ft" name="Mock cancel?">
      <bpmn:incoming>Flow_0ini6g5</bpmn:incoming>
      <bpmn:outgoing>Flow_0hkw6pl</bpmn:outgoing>
      <bpmn:outgoing>Flow_01iyvhl</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0ini6g5" sourceRef="Event_0gz41pl" targetRef="Gateway_0eun9ft" />
    <bpmn:sequenceFlow id="Flow_0hkw6pl" name="Yes" sourceRef="Gateway_0eun9ft" targetRef="Event_01xdtox">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=cancelDuration != null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1c37t1w" name="Application completed">
      <bpmn:incoming>Flow_01iyvhl</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_01iyvhl" name="No" sourceRef="Gateway_0eun9ft" targetRef="Event_1c37t1w">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=cancelDuration = number(from)</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_12g162v" sourceRef="Event_01xdtox" targetRef="Event_1l16s3m" />
    <bpmn:endEvent id="Event_1dafmug" name="Application canceled">
      <bpmn:incoming>Flow_1agsbi2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1agsbi2" sourceRef="Event_1l16s3m" targetRef="Event_1dafmug" />
    <bpmn:serviceTask id="Activity_1lqsgst" name="Get future actions">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="mock_application_process" />
        <zeebe:ioMapping>
          <zeebe:output source="=paymentDuration" target="paymentDuration" />
          <zeebe:output source="=cancelDuration" target="cancelDuration" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_19vt0s1</bpmn:incoming>
      <bpmn:outgoing>Flow_0l42tqh</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0e2bb6w" name="No" sourceRef="Gateway_0qcziw7" targetRef="Event_0w0jvn2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=paymentDuration != null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0jed06s" sourceRef="Event_0w0jvn2" targetRef="Event_0gz41pl" />
    <bpmn:intermediateCatchEvent id="Event_0w0jvn2">
      <bpmn:incoming>Flow_0e2bb6w</bpmn:incoming>
      <bpmn:outgoing>Flow_0jed06s</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0544vhj">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">=paymentDuration</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateCatchEvent id="Event_01xdtox">
      <bpmn:incoming>Flow_0hkw6pl</bpmn:incoming>
      <bpmn:outgoing>Flow_12g162v</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_10bu4f2">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">=cancelDuration</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateThrowEvent id="Event_1l16s3m" name="Send cancel application request">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="mock_send_cancel_application" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12g162v</bpmn:incoming>
      <bpmn:outgoing>Flow_1agsbi2</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1ycg9ok" />
    </bpmn:intermediateThrowEvent>
  </bpmn:process>
  <bpmn:message id="Message_3ia0ad4" name="mock_apply_start" />
  <bpmn:message id="Message_0b87f7m" name="receive_invoice">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=applicationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_2mf1ans" name="no_free_spots">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=applicationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="mock_process_application">
      <bpmndi:BPMNShape id="Event_0wzavj8_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="179" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="171" y="142" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0gnive1_di" bpmnElement="Gateway_1jr9yl4">
        <dc:Bounds x="265" y="92" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_19iwij0_di" bpmnElement="Event_19iwij0">
        <dc:Bounds x="372" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="350" y="142" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0uduk3t_di" bpmnElement="Event_0uduk3t">
        <dc:Bounds x="372" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="372" y="255" width="36" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ud1zhv_di" bpmnElement="Event_0ud1zhv">
        <dc:Bounds x="472" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qcziw7_di" bpmnElement="Gateway_0qcziw7" isMarkerVisible="true">
        <dc:Bounds x="635" y="92" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="623" y="62" width="75" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1li0l0x_di" bpmnElement="Event_1li0l0x">
        <dc:Bounds x="752" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="734" y="255" width="73" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ey7cbu_di" bpmnElement="Activity_1lqsgst">
        <dc:Bounds x="470" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0eun9ft_di" bpmnElement="Gateway_0eun9ft" isMarkerVisible="true">
        <dc:Bounds x="895" y="92" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="886" y="62" width="68" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1c37t1w_di" bpmnElement="Event_1c37t1w">
        <dc:Bounds x="1012" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1003" y="255" width="54" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ctm7tf_di" bpmnElement="Event_0gz41pl">
        <dc:Bounds x="802" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="785" y="142" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0vqlaag_di" bpmnElement="Event_0w0jvn2">
        <dc:Bounds x="732" y="99" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_10kyj8l_di" bpmnElement="Event_01xdtox">
        <dc:Bounds x="992" y="99" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0bs5uzz_di" bpmnElement="Event_1l16s3m">
        <dc:Bounds x="1062" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1050" y="142" width="61" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1dafmug_di" bpmnElement="Event_1dafmug">
        <dc:Bounds x="1132" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1123" y="142" width="54" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_01q0ybt_di" bpmnElement="Flow_01q0ybt">
        <di:waypoint x="215" y="117" />
        <di:waypoint x="265" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0h0gov7_di" bpmnElement="Flow_0h0gov7">
        <di:waypoint x="315" y="117" />
        <di:waypoint x="372" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13ei9dm_di" bpmnElement="Flow_13ei9dm">
        <di:waypoint x="290" y="142" />
        <di:waypoint x="290" y="230" />
        <di:waypoint x="372" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="287" y="183" width="36" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19vt0s1_di" bpmnElement="Flow_19vt0s1">
        <di:waypoint x="408" y="117" />
        <di:waypoint x="470" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uq69cu_di" bpmnElement="Flow_0uq69cu">
        <di:waypoint x="408" y="230" />
        <di:waypoint x="472" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l42tqh_di" bpmnElement="Flow_0l42tqh">
        <di:waypoint x="570" y="117" />
        <di:waypoint x="635" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x1baam_di" bpmnElement="Flow_0x1baam">
        <di:waypoint x="660" y="142" />
        <di:waypoint x="660" y="230" />
        <di:waypoint x="752" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="666" y="183" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0e2bb6w_di" bpmnElement="Flow_0e2bb6w">
        <di:waypoint x="685" y="117" />
        <di:waypoint x="732" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="701" y="99" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ini6g5_di" bpmnElement="Flow_0ini6g5">
        <di:waypoint x="838" y="117" />
        <di:waypoint x="895" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hkw6pl_di" bpmnElement="Flow_0hkw6pl">
        <di:waypoint x="945" y="117" />
        <di:waypoint x="992" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="960" y="99" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01iyvhl_di" bpmnElement="Flow_01iyvhl">
        <di:waypoint x="920" y="142" />
        <di:waypoint x="920" y="230" />
        <di:waypoint x="1012" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="928" y="183" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jed06s_di" bpmnElement="Flow_0jed06s">
        <di:waypoint x="768" y="117" />
        <di:waypoint x="802" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12g162v_di" bpmnElement="Flow_12g162v">
        <di:waypoint x="1028" y="117" />
        <di:waypoint x="1062" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1agsbi2_di" bpmnElement="Flow_1agsbi2">
        <di:waypoint x="1098" y="117" />
        <di:waypoint x="1132" y="117" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
